@startuml Component Relationships

title Wikibase Backend - Component Relationships

[FastAPI] as API
[Handlers] as Handlers
[Services] as Services
[Workers] as Workers
[Repositories] as Repos
[Models] as Models
database "Vitess" as Vitess
storage "S3" as S3
[Config] as Config

() "HTTP API" as HTTP
() "Database Interface" as DBI
() "Storage Interface" as SI
() "Message Queue" as MQ

' Architecture layers
API --> Handlers : routes
Handlers --> Services : logic
Services --> Repos : data
Workers --> Repos : processing
Services --> Models : serialization

' External interfaces
API -- HTTP
Repos -- DBI
Services -- SI
Handlers -- MQ

' External systems
DBI --> Vitess : mysql
SI --> S3 : s3
Config --> API : configuration
Config --> Workers : configuration

@enduml