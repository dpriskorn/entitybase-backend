# JSON Dumps Allowlist
# ====================
# This file contains lines that use json.dumps legitimately and should not be flagged.
#
# When to add to this allowlist:
# 1. json.dumps() operates on a dict/list that came from proper model_dump(mode='json')
# 2. json.dumps() operates on a simple dict/list that doesn't need special serialization
# 3. json.dumps() is used for canonical/hashing purposes (sort_keys=True)
#
# Format: filepath:line_number (one per line, lines starting with # are comments)

# base_storage.py - Uses default=str for non-model objects (else branch)
src/models/infrastructure/s3/base_storage.py:73
src/models/infrastructure/s3/base_storage.py:85

# client.py - Uses revision_dict which is already from model_dump(mode='json')
src/models/infrastructure/s3/client.py:78

# revision.py - Serializes properties list/dict to database storage
src/models/infrastructure/vitess/repositories/revision.py:173
src/models/infrastructure/vitess/repositories/revision.py:235
src/models/infrastructure/vitess/repositories/revision.py:239
src/models/infrastructure/vitess/repositories/revision.py:321

# user.py - Serializes statistics dicts to database storage
src/models/infrastructure/vitess/repositories/user.py:345
src/models/infrastructure/vitess/repositories/user.py:346
src/models/infrastructure/vitess/repositories/user.py:347

# backlink.py - Serializes top entities dict for database storage
src/models/infrastructure/vitess/repositories/backlink.py:135

# handler.py - Uses revision_dict from model_dump(mode='json') or plain dict, sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/handler.py:178
src/models/rest_api/entitybase/v1/handlers/entity/handler.py:274

# update_transaction.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/update_transaction.py:165

# creation_transaction.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/creation_transaction.py:111

# delete.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/delete.py:161

# revert.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/revert.py:130

# redirects.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/services/redirects.py:88

# delete_service.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/services/delete_service.py:192

# statement_hasher.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/statement_hasher.py:40

# reference_hasher.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/reference_hasher.py:33

# metadata_extractor.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/metadata_extractor.py:25

# qualifier_hasher.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/qualifier_hasher.py:27

# json_dumps worker - Pretty-print output (imports now filtered automatically)
src/models/workers/json_dumps/json_dump_worker.py:296
src/models/workers/json_dumps/json_dump_worker.py:302

# revision.py - Serializes properties list (list[str]) to database storage
src/models/infrastructure/vitess/repositories/revision.py:215
src/models/infrastructure/vitess/repositories/revision.py:297
