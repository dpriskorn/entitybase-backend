# JSON Dumps Allowlist
# ====================
# This file contains lines that use json.dumps legitimately and should not be flagged.
#
# When to add to this allowlist:
# 1. json.dumps() operates on a dict/list that came from proper model_dump(mode='json')
# 2. json.dumps() operates on a simple dict/list that doesn't need special serialization
# 3. json.dumps() is used for canonical/hashing purposes (sort_keys=True)
#
# Format: filepath:line_number (one per line, lines starting with # are comments)

# base_storage.py - Uses json.dumps on dict after model_dump(mode='json'), else branch uses default=str for non-model objects
src/models/infrastructure/s3/base_storage.py:78

# client.py - Uses json.dumps on revision_dict which is already from model_dump(mode='json')
src/models/infrastructure/s3/client.py:79

# revision.py - Serializes properties list/dict to database storage
src/models/infrastructure/vitess/repositories/revision.py:173
src/models/infrastructure/vitess/repositories/revision.py:235

# user.py - Serializes statistics dicts to database storage
src/models/infrastructure/vitess/repositories/user.py:345
src/models/infrastructure/vitess/repositories/user.py:346

# backlink.py - Serializes top entities dict for database storage
src/models/infrastructure/vitess/repositories/backlink.py:135

# handler.py - Uses revision_dict/request_data from model_dump() or dict sources, sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/handler.py:189
src/models/rest_api/entitybase/v1/handlers/entity/handler.py:288
src/models/rest_api/entitybase/v1/handlers/entity/handler.py:464

# delete.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/delete.py:161

# revert.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/handlers/entity/revert.py:130

# redirects.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/services/redirects.py:87

# delete_service.py - Uses revision_dict from model_dump(mode='json'), sorted for canonicalization
src/models/rest_api/entitybase/v1/services/delete_service.py:192

# statement_hasher.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/statement_hasher.py:40

# reference_hasher.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/reference_hasher.py:33

# metadata_extractor.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/metadata_extractor.py:25

# qualifier_hasher.py - Canonical JSON for hashing (intentionally uses canonical form with sort_keys)
src/models/internal_representation/qualifier_hasher.py:27